<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>JamBand</title>
<meta name="author" content="(Amir, Angel, Lin, Wilson)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/night.css" id="theme"/>

<link rel="stylesheet" href="documentation.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">JamBand</h1><h2 class="author">Amir, Angel, Lin, Wilson</h2><p class="date">Created: 2018-02-08 Thu 15:38</p>
</section>
<section>
<section id="slide-orga5bd907">
<h2 id="orga5bd907">Introduction</h2>
<p>
Our goal was to build a musical "jam band" driven by two ESP8266 microcontrollers, utilizing sensors and actuators. We have an autonomous mode which gives the user an option between two songs, <b>Row Row Your Boat</b> and <b>Twinkle Twinkle</b>. The user can also decide the tempo of the song in the autonomous mode. The Human controlled mode allows a user to change the songs using a touch sensor and vary the speed of the song with an ultrasonic sensor. The user is given instructions on the website on how to modulate the jam band.<br />
</p>
</section>
</section>
<section>
<section id="slide-orgdae4890">
<h2 id="orgdae4890">What is this?</h2>
<p>
Watch our video demo:<br />
</p>
<iframe width="700" height="400" frameborder="0" src="https://www.youtube.com/embed/FkhUbZ_ER8M" allowfullscreen></iframe>
<p>
Wanna create your own? Right on! This is a step-by-step guide to help you recreate our project. All the code can be found in my <a href="https://github.com/ckwojai/EE183_JamBand/">Github Repo</a>. Follow along!!!<br />
</p>
</section>
</section>
<section>
<section id="slide-orgaeac51c">
<h2 id="orgaeac51c">Bill of Materials</h2>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-org6abd2d9">
<h3 id="org6abd2d9">BOM 1</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">QTY</th>
<th scope="col" class="org-left">Part Number</th>
<th scope="col" class="org-left">Part Name</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Spec Sheet</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">FS90</td>
<td class="org-left">Micro Servo 9g</td>
<td class="org-left">Small blue, used for tapping</td>
<td class="org-left"><a href="http://www.mantech.co.za/Datasheets/Products/FITEC_FS90.pdf">link</a></td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">Accessory-187</td>
<td class="org-left">Jog Type Touch Sensor</td>
<td class="org-left">Square blue, 3 prong. Senses touch</td>
<td class="org-left"><a href="https://www.amazon.com/Sensor-Capacitive-Arduino-Atomic-Market/dp/B00WH7O00U">link</a></td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">HC - SR04</td>
<td class="org-left">Ultrasonic Raning Module</td>
<td class="org-left">looks like robot eyes</td>
<td class="org-left"><a href="http://www.micropik.com/PDF/HCSR04.pdf">link</a></td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">12E</td>
<td class="org-left">ESP 8266MOD</td>
<td class="org-left">Microcontroller</td>
<td class="org-left"><a href="http://amazingrobots.net/2017-2/resources/nodemcu_pinout/">link</a></td>
</tr>
</tbody>
</table>
</section>
<section id="slide-org5e2114f">
<h3 id="org5e2114f">BOM 2</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">QTY</th>
<th scope="col" class="org-left">Part Number</th>
<th scope="col" class="org-left">Part Name</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Spec Sheet</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">571CK</td>
<td class="org-left">Chop Stick</td>
<td class="org-left">A wooden Chopstick</td>
<td class="org-left"><a href="https://docs.google.com/viewer?url=patentimages.storage.googleapis.com/pdfs/US20090026782.pdf">link</a></td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">MCBB400</td>
<td class="org-left">Breadboard</td>
<td class="org-left">For holding components</td>
<td class="org-left"><a href="https://www.melopero.com/datasheets/Breadboard.pdf">link</a></td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">1956725</td>
<td class="org-left">PCB Mini Buzzer</td>
<td class="org-left">a small black speaker</td>
<td class="org-left"><a href="https://www.jameco.com/z/SV8-Velleman-Audio-Indicator-and-Alerts-Buzzer-8mA-12-Volt-Solder-Through-Hole_1956725.html">link</a></td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">RS002C</td>
<td class="org-left">Wire Jumper Kit</td>
<td class="org-left">Wires for Connecting components</td>
<td class="org-left"><a href="https://www.jameco.com/z/RS002C-Dagu-HiTech-Electronic-Wire-Jumper-Kit-140-Pieces-100-Male-Cables-40-Female-Cables-5-Colors_2150467.html">link</a></td>
</tr>
</tbody>
</table>
</section>
<section id="slide-org63218c0">
<h3 id="org63218c0">BOM 3</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">QTY</th>
<th scope="col" class="org-left">Part Number</th>
<th scope="col" class="org-left">Part Name</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Spec Sheet</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">OOBG</td>
<td class="org-left">330 ohm + 5% resistor</td>
<td class="org-left">a resistor</td>
<td class="org-left"><a href="https://www.sparkfun.com/products/11507">link</a></td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">12E</td>
<td class="org-left">Motor Shield</td>
<td class="org-left">Housing for ESP 8266</td>
<td class="org-left"><a href="https://hackaday.io/project/8856-incubator-controller/log/29291-node-mcu-motor-shield">link</a></td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">LP-503562</td>
<td class="org-left">3.7v Battery</td>
<td class="org-left">Powers the robot</td>
<td class="org-left"><a href="https://www.adafruit.com/product/258">link</a></td>
</tr>
</tbody>
</table>

</section>
</section>
<section>
<section id="slide-org9d02927">
<h2 id="org9d02927">Instruments</h2>
<p>
There are two instruments in our JamBand, a Chopstick Drumstick and a Buzzer. Each of them are connected to its own micro-controller.<br />
</p>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-orge17052b">
<h3 id="orge17052b">Servo: Chopstick DrumStick</h3>
<img src="https://camo.githubusercontent.com/3030f01bd39d331a8f57546d97d3c1b6166132e8/68747470733a2f2f696d616765732d6e612e73736c2d696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f34312d614138743536754c2e5f53583334325f2e6a7067">
<p>
A servo is a rotary actuator that allows for precise control of angular position. In our project, a chopstick is attached to our servo arm to extend its length.<br />
</p>
</section>
<section id="slide-org29efc80">
<h3 id="org29efc80">Buzzer</h3>
<img src="https://camo.githubusercontent.com/dfb04e3a4dd2851da87cb4cbe61be3b2114be12b/687474703a2f2f7777772e66757475726c65632e636f6d2f50696374757265732f33565049455a4f5043422e6a7067">
<p>
A buzzer is essentially a programmable device that makes noise. This will act as the main rhythm singer in our JamBand.<br />
</p>

</section>
</section>
<section>
<section id="slide-orgfd090a8">
<h2 id="orgfd090a8">PIN-OUT</h2>
<p>
Before we get into the actual wiring, let's take a look of the PIN-OUT of our ESP8266 &amp; Motor Shield that will be useful for wiring later on.<br />
</p>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-orgc04dc58">
<h3 id="orgc04dc58">PINOUT: ESP8266</h3>
<img src="https://camo.githubusercontent.com/ac7999049d8fcafe57a4f2b68633bda3f13126ac/687474703a2f2f616d617a696e67726f626f74732e6e65742f77702d636f6e74656e742f75706c6f6164732f323031362f30362f6e6f64656d63755f70696e6f75742e706e67">
</section>
<section id="slide-orgb82a64f">
<h3 id="orgb82a64f">PINOUT: Motor Shield</h3>
<img src="https://camo.githubusercontent.com/9b270f780bc03e7bb2ea9d578ba12295e4c68bef/687474703a2f2f616d617a696e67726f626f74732e6e65742f77702d636f6e74656e742f75706c6f6164732f323031362f30362f6d6f746f725f736869656c645f6469616772616d2e6a7067">
<p>
NOTE: Motor Shield is basically a board that makes wiring our ESP8266 easier. This is optional.<br />
</p>
</section>
</section>
<section>
<section id="slide-orgbd72da8">
<h2 id="orgbd72da8">Schematic</h2>
<p>
The schematics of our circuits are shown below, follow the exact connection!<br />
</p>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-orgbb6c726">
<h3 id="orgbb6c726">Mechanical Drawing</h3>

<div class="figure">
<p><img src="./img/mechanics.png" alt="mechanics.png" /><br />
</p>
</div>
</section>
<section id="slide-org3faa2b0">
<h3 id="org3faa2b0">Circuit Schematic</h3>

<div class="figure">
<p><img src="./img/schematic.png" alt="schematic.png" /><br />
</p>
</div>

</section>
</section>
<section>
<section id="slide-orgdf7380b">
<h2 id="orgdf7380b">Arduino Setup</h2>
<p>
Before we get into some coding, let's make sure your have Arduino setup. Here is a quick setup guide from <a href="http://www.instructables.com/id/Programming-the-ESP8266-12E-using-Arduino-software/">Instructables</a>.<br />
Moreover, we will need to install drivers for our ESP to connect with our computer. Drivers for different OSs can be found <a href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers">here</a>.<br />
</p>
</section>
</section>
<section>
<section id="slide-org5c9c2d9">
<h2 id="org5c9c2d9">Time to Code</h2>
<p>
In the following, we will guide your through some very basic code to make our servo, buzzer, ultrasonic, touch sensors to work. We can then build up from our basic code. All the code can be found in this <a href="https://github.com/ckwojai/EE183_JamBand/tree/master/test/basic/">Github folder</a>.<br />
</p>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-orgdd9ab29">
<h3 id="orgdd9ab29">TestCode: Servo</h3>
<div class="org-src-container">

<pre  class="src src-C"><span style="color: #c397d8;">#include</span> <span style="color: #70c0b1;">&lt;Servo.h&gt;</span>
<span style="color: #7aa6da;">Servo</span> <span style="color: #e7c547;">servo1</span>;
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">setup</span>() {
  servo1.attach(16);
  <span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">loop</span>() {
    servo1.write(90);
    delay(500);
    servo1.write(0);
    delay(500);
  }
}
</pre>
</div>
<p>
In void setup, we attach the global Servo object servo1 to whatever signal pin (orange) your servo is connected to (Brown=GND; Red=VCC; Orange=Signal). In loop, we basically set the angle for the servo to got to and a delay right after to give it time to reach such orientation.<br />
</p>

</section>
<section id="slide-org1138b76">
<h3 id="org1138b76">TestCode: Buzzer</h3>
<div class="org-src-container">

<pre  class="src src-C"><span style="color: #b9ca4a;">const</span> <span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">buzzerPin</span> = 15 ; <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">Buzzer Input</span>
<span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">duration</span> = 280; <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">long duration for the buzzer note</span>
<span style="color: #7aa6da;">int</span> <span style="color: #e78c45;">frequency</span>(<span style="color: #7aa6da;">char</span> <span style="color: #e7c547;">note</span>) {
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Input a note character (a-g), and returns the corresponding frequency in Hz for the tone() function.</span>
  <span style="color: #7aa6da;">char</span> <span style="color: #e7c547;">names</span>[] = { <span style="color: #70c0b1;">'c'</span>, <span style="color: #70c0b1;">'d'</span>, <span style="color: #70c0b1;">'e'</span>, <span style="color: #70c0b1;">'f'</span>, <span style="color: #70c0b1;">'g'</span>, <span style="color: #70c0b1;">'a'</span>, <span style="color: #70c0b1;">'b'</span>, <span style="color: #70c0b1;">'C'</span> }; <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">key</span>
  <span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">frequencies</span>[] = {262, 294, 330, 349, 392, 440, 494, 523}; <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">value pari</span>
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Search and find the corresponding frequency</span>
  <span style="color: #b9ca4a;">for</span> (i = 0; i &lt; numNotes; i++) { <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Step through the notes</span>
    <span style="color: #b9ca4a;">if</span> (names[i] == note) {
      <span style="color: #b9ca4a;">return</span>(frequencies[i]);
    }
  }
  <span style="color: #b9ca4a;">return</span>(0);
}
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">setup</span>() {
  pinMode(speakerPin, OUTPUT);
  Serial.begin(115200);
}
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">loop</span>() {
  tone(buzzerPin, frequency(<span style="color: #70c0b1;">'c'</span>), duration); <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Play note c (262 Hz) for 280ms.</span>
  delay(1000);
} 
</pre>
</div>
<p>
The above code should be self-explanatory.<br />
</p>
</section>
<section id="slide-orga9afaeb">
<h3 id="orga9afaeb">TestCode: Ultrasonic Sensor</h3>
<div class="org-src-container">

<pre  class="src src-C"><span style="color: #b9ca4a;">const</span> <span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">trigPin</span> = D5;
<span style="color: #b9ca4a;">const</span> <span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">echoPin</span> = D6;
<span style="color: #7aa6da;">long</span> <span style="color: #e7c547;">duration</span>;
<span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">distance</span>;
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">setup</span>() {
  pinMode(trigPin, OUTPUT); <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Sets the trigPin as an Output</span>
  pinMode(echoPin, INPUT); <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Sets the echoPin as an Input</span>
  Serial.begin(115200); <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Starts the serial communication</span>
}
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">loop</span>() {
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Clears the trigPin</span>
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Sets the trigPin on HIGH state for 10 micro seconds</span>
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Reads the echoPin, returns the sound wave travel time in microseconds</span>
  duration = pulseIn(echoPin, HIGH);
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Calculating the distance</span>
  distance= duration*0.034/2;
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Prints the distance on the Serial Monitor</span>
  Serial.print(<span style="color: #70c0b1;">"Distance: "</span>);
  Serial.println(distance);
  delay(1000);
}
</pre>
</div>
<p>
The above code should be pretty self-explanatory.<br />
</p>
</section>
<section id="slide-org9379bf5">
<h3 id="org9379bf5">TestCode: Touch Sensor</h3>
<div class="org-src-container">

<pre  class="src src-C"><span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">touchPin</span> = D2;
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">setup</span>() {
  Serial.begin(115200);
  pinMode(touchPin, INPUT); 
}
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">loop</span>() {
  <span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">touchValue</span> = digitalRead(touchPin);
  <span style="color: #b9ca4a;">if</span> (touchValue == HIGH) {
    Serial.println(<span style="color: #70c0b1;">"TOUCHED"</span>);
  } <span style="color: #b9ca4a;">else</span> {
    Serial.print(<span style="color: #70c0b1;">"."</span>);
  }
  delay(1000);
}
</pre>
</div>
<p>
The above code should be pretty self-explanatory.<br />
</p>
</section>
</section>
<section>
<section id="slide-org687f15e">
<h2 id="org687f15e">Composing your music with Servo and Buzzer</h2>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-orgd5bf1e5">
<h3 id="orgd5bf1e5">Composing tunes for the buzzer</h3>
<p>
Define each note in frequency, then make sound with the buzzer using the corresponding frequency to match each note in the sheet. A duration is also added for the time length of each note. These two parameters are then pass to the Arduino function tone(frequency, duration) to let the buzzer make Sound.<br />
<img src="./img/compose.png" alt="compose.png" /><br />
</p>
</section>
<section id="slide-orge76b91c">
<h3 id="orge76b91c">Composing beats for the servo</h3>
<p>
As for the servo, it's better to code this together with the buzzer for synchronization purpose. We first need to determine the starting and ending angle for the servo. Fix the ending angle because that's where the stick hit the drum every time. Then program the delay as shown below, assume the initial configuration of servo is at starting angle,<br />
</p>
</section>
<section id="slide-org1fcee21">
<h3 id="org1fcee21">Tunes in harmony</h3>
<ol>
<li>Set the servo to the ending angle<br /></li>
<li>Apply some delay too allow time for the servo to go to the ending angle<br /></li>
<li>After the above appropriate delay, this is when the stick hit the drum<br /></li>
<li>Start playing one note of the buzzer music<br /></li>
<li>Set the servo back to starting angle, and apply some delay for it to get there<br /></li>
<li>Repeat the above steps<br /></li>

</ol>
</section>
</section>
<section>
<section id="slide-orgb1f8e1c">
<h2 id="orgb1f8e1c">Communication between two micro-controllers</h2>
<p>
Now that we get everything set up, we need a way for the two MCUs to talk to each other. For the sake of simplicity, we are using Serial Communication.<br />
</p>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-org7da05a5">
<h3 id="org7da05a5">Wire connection</h3>
<p>
First, connects Tx to Rx from one MCUs and and vice versa for the other. Then, a simple code can be used to test if the channel is working. Note that here we are treating the Drumsticks side as a master (sender) and the Buzzer side as a slave (receiver).<br />
</p>
</section>
<section id="slide-org32bbe88">
<h3 id="org32bbe88">Serial Communication: Sender side</h3>
<div class="org-src-container">

<pre  class="src src-C"><span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">setup</span>() {
  Serial.begin(115200);
}
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">loop</span>() {
  Serial.print(<span style="color: #70c0b1;">'H'</span>); <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Command the slave to turn the LED ON</span>
  delay(2000);
  Serial.print(<span style="color: #70c0b1;">'L'</span>); <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Command the slave to turn the LED OFF</span>
  delay(2000);  
}
</pre>
</div>
</section>
<section id="slide-orge7d9492">
<h3 id="orge7d9492">Serial Communication: Receiver side</h3>
<div class="org-src-container">

<pre  class="src src-C"><span style="color: #7aa6da;">int</span> <span style="color: #e7c547;">incomingByte</span>;      <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">a variable to read incoming serial data into</span>
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">setup</span>() {
  Serial.begin(115200);
  pinMode(LED_BUILTIN, OUTPUT); <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">built-in LED pin for ESP8266</span>
}
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">loop</span>() {
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">see if there's incoming serial data:</span>
  <span style="color: #b9ca4a;">if</span> (Serial.available() &gt; 0) {
    <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">read the oldest byte in the serial buffer:</span>
    incomingByte = Serial.read();
    <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">if it's a capital H (ASCII 72), turn on the LED:</span>
    <span style="color: #b9ca4a;">if</span> (incomingByte == <span style="color: #70c0b1;">'H'</span>) {
      digitalWrite(LED_BUILTIN, HIGH);
    }
    <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">if it's an L (ASCII 76) turn off the LED:</span>
    <span style="color: #b9ca4a;">if</span> (incomingByte == <span style="color: #70c0b1;">'L'</span>) {
      digitalWrite(LED_BUILTIN, LOW);
    }
  }
}
</pre>
</div>
<p>
Update this code to your two MCUs, you should see the 'L' and 'H' in the Serial Monitor on the sender side while the LED on the receiver side should toggle ON and OFF in a interval of 2 seconds.<br />
</p>

</section>
</section>
<section>
<section id="slide-orgc9290c4">
<h2 id="orgc9290c4">Wireless connection</h2>
<p>
Time to connect your controller to the web so that users can control your band through WIFI.<br />
For Access-Point WIFI setup, please reference to this online <a href="http://www.instructables.com/id/Programming-a-HTTP-Server-on-ESP-8266-12E/">tutorial</a>.<br />
</p>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-orgcac8bfd">
<h3 id="orgcac8bfd">Employ your device to the World-Wide Web</h3>
<p>
Please complete the tutorials linked in the previous slide before attempting this setup. In the online tutorial, you successful create a WIFI access point at your ESP8266 device; however, users have to connect to the WIFI you created in order to control the band. Quite inconvenient right? Indeed, we can actually do a simple port forward using our home WIFI to get our project online.<br />
</p>
</section>
<section id="slide-org9a57f87">
<h3 id="org9a57f87">ESP as a workstation: setup</h3>
<div class="org-src-container">

<pre  class="src src-C"><span style="color: #c397d8;">#include</span> <span style="color: #70c0b1;">&lt;ESP8266WiFi.h&gt;</span>
<span style="color: #b9ca4a;">const</span> <span style="color: #7aa6da;">char</span>* <span style="color: #e7c547;">ssid</span> = <span style="color: #70c0b1;">"your_home_wifi_ssid"</span>;
<span style="color: #b9ca4a;">const</span> <span style="color: #7aa6da;">char</span>* <span style="color: #e7c547;">password</span> = <span style="color: #70c0b1;">"your_home_wifi_password"</span>;
<span style="color: #b9ca4a;">const</span> <span style="color: #7aa6da;">char</span>* <span style="color: #e7c547;">host</span> = <span style="color: #70c0b1;">"192.168.0.24"</span>; <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">it will tell you the IP once it starts up</span>
<span style="color: #7aa6da;">WiFiServer</span> <span style="color: #e78c45;">server</span>(80); <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">Initialize the server on Port 80</span>
<span style="color: #7aa6da;">void</span> <span style="color: #e78c45;">setup</span>() {
  WiFi.mode(WIFI_STA); <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">Our ESP8266-12E is a Work STAtion connected to your Home Wifi  </span>
  Serial.begin(115200); <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">Start communication between the ESP8266-12E and the monitor window</span>
  Serial.print(<span style="color: #70c0b1;">"Connecting to "</span>);
  Serial.println(ssid);
  WiFi.begin(ssid, password);
  <span style="color: #b9ca4a;">while</span> (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(<span style="color: #70c0b1;">"."</span>);
  }
  Serial.println(<span style="color: #70c0b1;">"WiFi connected"</span>);
  server.begin(); <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Start the server</span>
  <span style="color: #969896; font-style: italic;">// </span><span style="color: #969896; font-style: italic;">Print the IP address</span>
  Serial.println(WiFi.localIP());
  pinMode(LED_BUILTIN, OUTPUT); <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">GPIO16 is an OUTPUT pin;</span>
  digitalWrite(LED_BUILTIN, LOW); <span style="color: #969896; font-style: italic;">//</span><span style="color: #969896; font-style: italic;">Initial state is ON</span>
}
</pre>
</div>

</section>
<section id="slide-orgfccda5c">
<h3 id="orgfccda5c">ESP as a workstation: loop</h3>
<p>
The code in loop() should be exactly the same as in the <a href="http://www.instructables.com/id/Programming-a-HTTP-Server-on-ESP-8266-12E/">tutorial</a>.<br />
Essentially what we did here is connect our ESP to our home WIFI which is CONNECTED to the Internet; instead of treating ESP as a WIFI access point. Connecting to our home WIFI is a crucial step in getting our project online.<br />
</p>
</section>
<section id="slide-org2ec122d">
<h3 id="org2ec122d">Port Forwarding</h3>
<p>
If everything works well, you should now be able to connect to the control page at 192.168.4.1 given you are connected to your home WIFI. To get it online, we need to do a port forwarding in our router setting.<br />
</p>
<ol>
<li>Go to 192.168.0.1 (or whatever your router setting page is)<br /></li>
<li>Find port forwarding, look for two options to fill in: IP address and port<br /></li>
<li>Go to <a href="http://www.whatsmyip.org">http://www.whatsmyip.org</a> to find IP address for your router<br /></li>
<li>In the router port forwarding page, fill the IP address you found and the port you set in your Arduino code (80 in our case).<br /></li>

</ol>
</section>
<section id="slide-orgf2da166">
<h3 id="orgf2da166">Try it out!</h3>
<p>
If everything sets up correctly, go to the IP address of your router from anywhere whether you are using WIFI or cellular data. You should be able to see that control page of our jamband.<br />
Moreover, you can make your own webpage with cool styles such as this one <a href="https://ckwojai.github.io/EE183_JamBand/control.html">here</a>.<br />
</p>
</section>
</section>
<section>
<section id="slide-org2284886">
<h2 id="org2284886">Summary</h2>
<p>
Now that you have learned all the essential knowledge in creating your own project, it's up to you to put everything together. If you want to recreate the project we did, follow the steps below:<br />
</p>
<a href="#" class="navigate-down"><img width="178" height="238" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow"></a>
</section>
<section id="slide-orgc07926c">
<h3 id="orgc07926c">Steps to recreate our project</h3>
<ol>
<li>Compose two songs each having two tempos, make sure the two instruments play in harmony.<br /></li>
<li>Serial Communication: Send Ready, Song, and Tempo Signals on the master side, while write layers of if statements in the slave side to make sure it plays ONLY when according signals are received.<br /></li>
<li>Write your sensors' code in your master side to change the behavior of the systems based on reading from sensors.<br /></li>
<li>Employ it online: create a separate webpage that has buttons that links to different states of the message. e.g send a GET request to ip<sub>address</sub>/T/L to play Twinkle Twinkle little star in a sLow tempo.<br /></li>
<li>The complete code can be found in the root directory of my Githbu page: <a href="https://github.com/ckwojai/EE183_JamBand/blob/master/buzzer.ino">buzzer.ino</a> and <a href="https://github.com/ckwojai/EE183_JamBand/blob/master/servo.ino">servo.ino</a>.<br /></li>

</ol>
</section>
</section>
<section>
<section id="slide-orgced3170">
<h2 id="orgced3170">Conclusion</h2>
<p>
In this tutorial, we guided your through a detail setup of our project, including bill of materials, circuit schematics, code for controlling all the components, and Wireless setup. Based on what you have learned, you should have no problem recreating our project, or even build up on what we had and create your own project.<br />
</p>

<p>
Last but not least, we would like to thank our EE183 Professor Mehta for this wonderful project.<br />
<a href="https://ckwojai.github.io/EE183_JamBand/">Back to Home Page</a><br />
</p>
</section>
</section>
</div>
</div>
<script src="./reveal.js/lib/js/head.min.js"></script>
<script src="./reveal.js/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: true,
keyboard: true,
overview: true,
width: 1200,
height: 800,
margin: 0.20,
minScale: 0.50,
maxScale: 2.50,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: './reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: './reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
